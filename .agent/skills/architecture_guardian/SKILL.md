# Architecture Guardian Skill

本技能旨在维护项目代码的架构整洁性和模块化，遵循领域驱动设计 (DDD) 和干净架构的原则。

## 核心守则

### 1. 职责分离 (Separation of Concerns)
- **Service 层隔离**：`src/services` 中的类不应包含任何原始的 SQL 语句。所有数据库操作必须通过 `src/storage.py` 或专门的数据模型层。
- **依赖倒置**：高层业务逻辑不应直接依赖底层的具体实现（如特定的 API 客户端）。

### 2. 异步完整性 (Async Integrity)
- **非阻塞 I/O**：在异步方法中，所有的网络请求、数据库查询和文件操作必须使用 `await`。
- **避免混用**：除非必要，不要在异步函数中调用耗时的同步阻塞函数。

### 3. 数据契约 (Data Contracts)
- **统一模型**：所有的股票数据处理必须优先使用 `data_provider/realtime_types.py` 中定义的数据结构。

## 审计工作流
当被要求“根据架构专家技能审计代码”时：
1. 检查是否存在越过抽象层直接访问数据库/外部 API 的情况。
2. 识别过于庞大的类和函数，建议进行职责拆分。
3. 验证异步调用链是否完整且无阻塞。
